var FW=FW||{};!function($,window,document,undefined){function buildModal(){var content,contentHolder,docFrag;content="string"==typeof this.options.content?this.options.content:this.options.content.innerHTML,docFrag=document.createDocumentFragment(),this.modal=document.createElement("div"),this.modal.className="modal",this.options.minWidth&&(this.modal.style.minWidth=this.options.minWidth+"px"),this.options.maxWidth&&(this.modal.style.maxWidth=this.options.maxWidth+"px"),this.options.closeButton===!0&&(this.closeButton=document.createElement("span"),this.closeButton.className="modal__close",this.modal.appendChild(this.closeButton)),this.options.overlay===!0&&(this.overlay=document.createElement("div"),this.overlay.className="modal__overlay",docFrag.appendChild(this.overlay)),contentHolder=document.createElement("div"),contentHolder.className="modal__content",contentHolder.innerHTML=content,this.modal.appendChild(contentHolder),docFrag.appendChild(this.modal),document.body.appendChild(docFrag)}function copyFormValues(dir){var inputElements,destinyElement;if("string"!=typeof this.options.content){"open"===dir?(inputElements=this.options.content.querySelectorAll("input, textarea"),destinyElement=document.querySelector(".modal__content")):(inputElements=document.querySelectorAll(".modal__content input, .modal__content textarea"),destinyElement=this.options.content);for(var i=0,len=inputElements.length;len>i;i++)if(""!==inputElements[i].name)switch(inputElements[i].type){case"checkbox":case"radio":destinyElement.querySelector('[name="'+inputElements[i].name+'"][value="'+inputElements[i].value+'"]').checked=inputElements[i].checked;break;default:destinyElement.querySelector('[name="'+inputElements[i].name+'"]').value=inputElements[i].value}}}function bindEvents(){var self=this;this.closeButton&&this.closeButton.addEventListener("click",this.close.bind(this)),this.overlay&&this.overlay.addEventListener("click",this.close.bind(this)),this.document.addEventListener("keydown",function(e){27===e.which&&self.modal.className.indexOf("modal--open")>-1&&self.close()})}function extendDefaults(source,properties){var property;for(property in properties)properties.hasOwnProperty(property)&&(source[property]=properties[property]);return source}function transitionSelect(){var el=document.createElement("div");return el.style.WebkitTransition?"webkitTransitionEnd":el.style.OTransition?"oTransitionEnd":"transitionend"}Modal=function(){this.closeButton=null,this.modal=null,this.overlay=null,this.document=document,this.transitionEnd=transitionSelect(),arguments[0]&&"object"==typeof arguments[0]&&(this.options=extendDefaults(Modal.defaults,arguments[0]))},Modal.defaults={closeButton:!0,content:"",maxWidth:null,minWidth:null,overlay:!0,confirmOnClose:!1,confirmOnCloseText:"Weet u zeker dat u dit venster wilt sluiten?",copyFormValues:!0,onClose:null,onOpen:null},Modal.prototype.close=function(){var self=this;this.options.confirmOnClose&&!window.confirm(this.options.confirmOnCloseText)||(this.options.copyFormValues&&copyFormValues.call(this,"close"),this.modal.className=this.modal.className.replace(" modal--open",""),this.overlay.className=this.overlay.className.replace(" modal__overlay--open",""),document.documentElement.className=document.documentElement.className.replace(" modal-opened",""),this.modal.addEventListener(this.transitionEnd,function(){self.modal.parentNode&&self.modal.parentNode.removeChild(self.modal)}),this.overlay.addEventListener(this.transitionEnd,function(){self.overlay.parentNode&&self.overlay.parentNode.removeChild(self.overlay)}),"function"==typeof this.options.onClose&&this.options.onClose.call(this))},Modal.prototype.open=function(){buildModal.call(this),this.options.copyFormValues&&copyFormValues.call(this,"open"),bindEvents.call(this),window.getComputedStyle(this.modal).height,this.modal.className=this.modal.className+" modal--open",this.overlay.className=this.overlay.className+" modal__overlay--open",document.documentElement.className=document.documentElement.className+" modal-opened","function"==typeof this.options.onOpen&&this.options.onOpen.call(this)},typeof $!==undefined&&$("body").on("click","[data-openmodal]",function(){var $modal=$('[data-modal="'+$(this).data("openmodal")+'"]'),newModal=new FW.Modal({content:$modal[0],maxWidth:parseFloat($modal.data("modal-width"))||600});newModal.open()}),FW.Modal=Modal}(window.Zepto||window.jQuery,window,document);